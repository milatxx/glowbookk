@using Microsoft.AspNetCore.Localization
@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer

@using Microsoft.Extensions.Localization
@inject IStringLocalizer<GlowBook.Web.SharedResources> SR

@{
    var requestCulture = Context.Features.Get<IRequestCultureFeature>();
    var culture = requestCulture?.RequestCulture.UICulture.TwoLetterISOLanguageName ?? "nl";
}

<!DOCTYPE html>
<html lang="@culture">
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - @SR["AppTitle"]</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body>
    <header class="gb-header">
        <div class="container-fluid">
            <div class="d-flex justify-content-between align-items-center">
                <div class="gb-header-title">
                    @SR["AppTitle"]
                </div>

                <div>
                    <a asp-controller="Home"
                       asp-action="Index"
                       class="gb-nav-btn">
                        @SR["Nav_Home"]
                    </a>

                    @* Alles hieronder enkel tonen als ingelogd *@
                    @if (User.Identity?.IsAuthenticated ?? false)
                    {
                        @* Calendar/Appointments enkel voor Admin/Owner/Employee *@
                        @if (User.IsInRole("Admin") || User.IsInRole("Owner") || User.IsInRole("Employee"))
                        {
                            <a asp-controller="Appointments"
                               asp-action="Index"
                               class="gb-nav-btn">
                                @SR["Nav_Calendar"]
                            </a>
                        }

                        <a asp-controller="Customers"
                           asp-action="Index"
                           class="gb-nav-btn">
                            @SR["Nav_Customers"]
                        </a>

                        <a asp-controller="Services"
                           asp-action="Index"
                           class="gb-nav-btn">
                            @SR["Nav_Services"]
                        </a>

                        @* Staff enkel voor Admin/Owner *@
                        @if (User.IsInRole("Admin") || User.IsInRole("Owner"))
                        {
                            <a asp-controller="Staff"
                               asp-action="Index"
                               class="gb-nav-btn">
                                @SR["Nav_Staff"]
                            </a>
                        }

                        @* Users beheer enkel voor Admin *@
                        @if (User.IsInRole("Admin"))
                        {
                            <a asp-controller="Admin"
                               asp-action="Users"
                               class="gb-nav-btn">
                                @SR["Nav_Admin"] 
                            </a>
                        }

                        <form id="logoutForm"
                              asp-controller="Account"
                              asp-action="Logout"
                              method="post"
                              class="d-inline">
                            <button type="submit" class="gb-nav-btn border-0">
                                @SR["Nav_Logout"]
                            </button>
                        </form>
                    }
                    else
                    {
                        <a asp-controller="Account"
                           asp-action="Login"
                           class="gb-nav-btn">
                            @SR["Nav_Login"]
                        </a>
                    }
                </div>

            </div>

            <!-- TAALWISSEL -->
            <div class="text-end mt-1 me-2">
                <a href="?lang=nl">@SR["Lang_NL"]</a> |
                <a href="?lang=en">@SR["Lang_EN"]</a> |
                <a href="?lang=fr">@SR["Lang_FR"]</a>
            </div>

        </div>
    </header>

    <main class="container">
        @if (TempData["Message"] != null)
        {
            <div class="alert alert-success mt-3">@TempData["Message"]</div>
        }
        @RenderBody()
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    @RenderSection("Scripts", required: false)
</body>
</html>
