<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="GlowBook.Mobile.Views.ServicesPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    BackgroundColor="{StaticResource GbBabyPink}">

    <ContentPage.Content>
        <Grid Padding="24">

            <Border Style="{StaticResource GbCard}">
                <VerticalStackLayout Spacing="12">

                    <Label Text="{Binding Title}"
                           Style="{StaticResource GbCardTitle}" />

                    <Label Text="Overzicht van diensten."
                           FontSize="14"
                           TextColor="Gray" />

                    <HorizontalStackLayout HorizontalOptions="End">
                        <Button Text="Sync"
                                Style="{StaticResource GbPrimaryButton}"
                                Command="{Binding LoadAsync}" />
                    </HorizontalStackLayout>

                    <RefreshView IsRefreshing="{Binding IsBusy}"
                                 Command="{Binding LoadAsync}">
                        <CollectionView ItemsSource="{Binding Services}">
                            <CollectionView.EmptyView>
                                <Label Text="Geen diensten gevonden."
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center"
                                       TextColor="Gray" />
                            </CollectionView.EmptyView>

                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Border Style="{StaticResource GbItemCard}">
                                        <VerticalStackLayout Spacing="2">
                                            <Label Text="{Binding Name}"
                                                   FontAttributes="Bold" />
                                            <Label Text="{Binding Category}"
                                                   FontSize="13" />
                                            <Label FontSize="12"
                                                   TextColor="Gray">
                                                <Label.FormattedText>
                                                    <FormattedString>
                                                        <Span Text="Duur: " />
                                                        <Span Text="{Binding DurationMinutes}" />
                                                        <Span Text=" min   " />
                                                        <Span Text="Prijs: " />
                                                        <Span Text="{Binding Price}" />
                                                    </FormattedString>
                                                </Label.FormattedText>
                                            </Label>
                                        </VerticalStackLayout>
                                    </Border>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </RefreshView>

                </VerticalStackLayout>
            </Border>

        </Grid>
    </ContentPage.Content>
</ContentPage>
