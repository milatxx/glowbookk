<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="GlowBook.Mobile.Views.AgendaPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    BackgroundColor="{StaticResource GbBabyPink}">

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Nieuw" Command="{Binding NewAppointmentCommand}" />
    </ContentPage.ToolbarItems>

    <ContentPage.Content>
        <Grid Padding="24">

            <Border Style="{StaticResource GbCard}">
                <VerticalStackLayout Spacing="12">

                    <Label Text="{Binding Title}" Style="{StaticResource GbCardTitle}" />

                    <Label Text="Werkt offline: afspraken blijven zichtbaar + offline aanmaken wordt later gesynchroniseerd."
                           FontSize="14"
                           TextColor="Gray" />

                    <HorizontalStackLayout HorizontalOptions="End" Spacing="8">
                        <Button Text="Sync"
                                Style="{StaticResource GbPrimaryButton}"
                                Command="{Binding LoadCommand}" />
                    </HorizontalStackLayout>

                    <RefreshView IsRefreshing="{Binding IsBusy}"
                                 Command="{Binding LoadCommand}">
                        <CollectionView ItemsSource="{Binding Appointments}">
                            <CollectionView.EmptyView>
                                <Label Text="Geen afspraken gevonden."
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center"
                                       TextColor="Gray" />
                            </CollectionView.EmptyView>

                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Border Style="{StaticResource GbItemCard}">
                                        <VerticalStackLayout Spacing="2">
                                            <Label Text="{Binding CustomerName}" FontAttributes="Bold" />
                                            <Label Text="{Binding Start}" FontSize="13" />
                                            <Label Text="{Binding StaffName}" FontSize="12" TextColor="Gray" />
                                            <Label Text="{Binding ServiceName}" FontSize="12" TextColor="Gray" />
                                            <Label Text="{Binding Status}" FontSize="12" TextColor="Gray" />

                                            <Label Text="Wacht op sync (offline aangemaakt)"
                                                   FontSize="12"
                                                   TextColor="Gray"
                                                   IsVisible="{Binding IsPending}" />
                                        </VerticalStackLayout>
                                    </Border>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </RefreshView>

                </VerticalStackLayout>
            </Border>

        </Grid>
    </ContentPage.Content>
</ContentPage>
